(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,5356,e=>{"use strict";e.s(["default",()=>x],5356);var t=e.i(43476),s=e.i(71645),l=e.i(79913),a=e.i(95522),r=e.i(53850),c=e.i(57688),i=e.i(98497);function n(){let{ScreenState:e,setScreenState:n}=(0,l.useScreenState)(),[o,u]=(0,s.useState)(""),{From:f,To:x,setFrom:d,setTo:p,setResult:h}=(0,l.useResults)(),m=(0,a.useLang)(e=>e.conf),g=(0,i.useUserID)(e=>e.ID),w=(0,s.useRef)(null);(0,s.useEffect)(()=>{""===x&&p(m.lang)},[]);let v=async()=>{try{if(n("waiting"),l.webspeak.change_voice(f),!x)throw Error("To is null");h(await l.network.get_Yomikata(f,x,o,g)),n("result")}catch(e){console.error(e),n("input")}};return(0,t.jsxs)("div",{className:"   relative w-full rounded-[10px]   mt-[24px] h-fit px-[16px]   bg-[#ffffff81]   border-[1px] p-[16px]   border-[#DEE1E6FF]   ",children:[(0,t.jsxs)("div",{className:"   w-fit   flex flex-row gap-1   justify-center   ",children:[(0,t.jsx)(r.Dropdown,{setLang:d,Lang:f,DropDownTitle:m.Genbun}),(0,t.jsx)(c.default,{src:"/images/arrow_right.svg",className:"   mt-[20px]   mb-auto border-1   ",width:30,height:30,alt:""}),(0,t.jsx)(r.Dropdown,{setLang:p,Lang:x,DropDownTitle:m.Yomikata})]}),(0,t.jsx)("textarea",{className:"   min-h-[102px] mt-[12px]   w-full h-auto px-[12px] py-[5px]   font-[14px] border-[1px] rounded-[6px]   bg-[#FFFFFF]   border-[#DEE1E6FF]   text-[#000000]   ",placeholder:m.init_input_text,value:o,ref:w,onInput:e=>{u(e.currentTarget.value);let t=w.current;t&&(t.style.height="auto",t.style.height=t.scrollHeight+"px")}}),(0,t.jsx)("button",{className:"   mt-[12px] w-full   bg-emerald-400 h-[44px] rounded-[3px]   active:scale-[95%] cursor-pointer   ",disabled:"waiting"===e,onClick:v,children:(0,t.jsx)("div",{className:"   m-auto   text-[16px]   active:scale-[95%]   select-none   text-[#000000]   ",children:m.pronu_change})})]})}function o(){let e=(0,l.useResults)(e=>e.Result),a=(0,l.useScreenState)(e=>e.setScreenState),r=(0,l.useResults)(e=>e.setLog_flag),c=(0,l.useResults)(e=>e.Log_flag);return(0,s.useEffect)(()=>{},[]),(0,t.jsxs)("div",{className:"   w-full h-[80vh] bg-[#ffffff]   rounded-md p-5 mt-5 flex flex-col   ",children:[(0,t.jsx)("button",{className:"   w-5 h-5   bg-[url(/images/back.svg)] bg-cover   active:scale-[80%]   mb-5   ",onClick:()=>{c?(r(!1),window.location.href="/mypage"):a("input")}}),(0,t.jsx)("div",{className:"   h-[60vh] overflow-y-auto flex flex-col gap-5   mb-5   ",children:e.map((e,s)=>(0,t.jsx)(u,{text:e.original,Yomikata:e.convert},s))}),(0,t.jsx)("div",{className:"h-auto flex-1"}),(0,t.jsx)(f,{})]})}function u(e){let{text:a,Yomikata:r}=e,[i,n]=(0,s.useState)(!1),[o,u]=(0,s.useState)([]),[f,x]=(0,s.useState)([]);return(0,s.useEffect)(()=>{u(a.split(" ")),x(r.split(" "))},[a,r]),(0,t.jsxs)("div",{className:"   w-full h-fit py-2 px-5 self-center   flex flex-row justify-center   shadow-lg rounded-2xl border-1 border-[#cacaca]   ",children:[(0,t.jsx)("div",{className:"   flex flex-row flex-wrap   gap-2 mr-[2px]   ",children:o.map((e,s)=>(0,t.jsxs)("div",{className:"   h-fit w-fit   flex flex-col items-center   ",children:[(0,t.jsx)("div",{className:"   h-fit w-fit   text-[20px]   ",children:e}),(0,t.jsx)("div",{className:"   h-fit w-fit   text-[18px]   ",children:f[s]})]},s))}),(0,t.jsx)("button",{className:"\n                    min-w-[50px] min-h-[50px]\n                    w-fit h-fit\n                    rounded-full\n                    border-1 mr-2 ml-auto self-center\n                    border-[#cacaca] active:scale-95\n                ",onClick:()=>{i?l.webspeak.Stop():l.webspeak.Play(a,n)},children:(0,t.jsx)(c.default,{src:"/images/".concat(i?"on":"off","_speaker.svg"),alt:i?"on Play":"off Play",width:50,height:50})})]})}function f(){let[e,r]=(0,s.useState)(!1),[i,n]=(0,s.useState)(null),o=(0,a.useLang)(e=>e.conf),u=async()=>{try{if(e){let e=await l.rec_voice.stop_rec_voice();if(r(!1),e.Blob){let t=await l.network.get_Yomikata_score(e.Blob,e.type),s=0;t.results.forEach(e=>{s+=e.confidence}),n(s/t.results.length)}}else l.rec_voice.start_rec_voice(),r(!0),n(null)}catch(e){r(!1),console.error(e)}};return(0,t.jsxs)("div",{className:"   h-[10vh] w-full   ",children:[(0,t.jsx)("p",{className:"   text-[15px]   ",children:o.speak_test}),(0,t.jsxs)("div",{className:"   h-auto w-full   flex flex-row items-center   mt-2.5   ",children:[(0,t.jsx)("button",{className:"\n                        rounded-full w-[40px] h-[40px]\n                        border-1 border-[#eaeaea]\n                        ml-5 active:scale-95 relative\n                    ",style:{background:e?"#00ff00":"#FFFFFF"},onClick:u,children:(0,t.jsx)(c.default,{src:"/images/mic.svg",alt:"mic",fill:!0})}),(0,t.jsxs)("p",{className:"   text-[30px]   border-1 border-[#eaeaea]   rounded-md ml-20 px-3   ",children:["Score:ã€€",i]})]})]})}function x(){let{ScreenState:e,setScreenState:a}=(0,l.useScreenState)(),r=(0,l.useResults)(e=>e.Log_flag);return(0,s.useEffect)(()=>{r&&a("result")},[r]),(0,t.jsx)("div",{className:"px-[24px] w-full flex-1 border-1 overflow-y-auto",children:"result"===e?(0,t.jsx)(o,{}):(0,t.jsx)(n,{})})}},10889,e=>{e.n(e.i(5356))}]);